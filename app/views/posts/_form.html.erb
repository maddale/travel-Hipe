<%= form_for [current_user, @post] do |f| %>

<%= render 'shared/forms_errors', object: @post %>

  
  <div class="selected-places">
    <% @places.each_with_index do |place, index| %>
      <span class="bage-place badge-success" data-place-id="<%= place.ident %>" id="<%= index %>"><i class="material-icons">location_on</i><%= place.name %>
        <span class="close-b" id="close-<%= index %>">&times;</span>
      </span>
    <% end %>
  </div>
    
  <div id="new-places">
  
    <% @post.places.each_with_index do |place, index| %>
      <%= fields_for "places[place#{index}]", place do |f_p| %>
        <div id="places-item-<%= index %>">
          <%= f_p.hidden_field :name %>
          <%= f_p.hidden_field :ident %>
        </div>    
      <% end %>
    <% end %>


  </div>


  <div class="form-group">
    <%= f.label :title %>
    <%= f.text_field :title, class: "form-control"%>
  </div>
  
  <div class="form-group">
    <%= f.label :body %>
    <%= f.hidden_field :body, class: "form-control", id: "x", rows: 5 %>
    <trix-editor input="x"></trix-editor>
  </div>

  <div class="form-group">
    <%= f.label :category_id %>
    <%= f.collection_select :category_id,  Category.all, :id, :name, { include_blank: true }, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= f.label :all_tags %>
    <%= f.text_field :all_tags, class: "form-control"%>
  </div>


  <%= f.submit "Edit", class: "btn btn-success" %>
<% end %>