<script>
      
      
      function initMap() {
        $('#map').fadeIn(300);
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 0, lng: 0},
          zoom: 3
        });
        var n = 0;
        map.addListener('click', function(e) {
             e.stop();
             request = {placeId: e.placeId}
             service = new google.maps.places.PlacesService(map);
             
             service.getDetails(request, function(PlaceResult, PlacesServiceStatus) {
              if (google.maps.places.PlacesServiceStatus.OK) {
                $('#new-places').append('<div id="places-item-' + n + '"><input value="' + PlaceResult.name + '" type="hidden" name="places[place-' + n + '][name]" id="place' + n + '_name"><input value="' + e.placeId + '" type="hidden" name="places[place-' + n + '][ident]" id="place' + n + '_name"></div>');
                $('.selected-places').append('<span class="bage-place badge-success" id="' + n + '">' + PlaceResult.name + '<span class="close-b" onclick="hide(this)">&nbsp&nbsp&times;</span></span>');
              }
               
               else {
                alert('Ooops! Smth is wrong... Please try again.');

               }
             
                n += 1;
             }); 
        });

      }

      function hide(el) {
        var id = $(el).parent().attr('id');
        $(el).parent().detach();
        $('#places-item-' + id).detach();

      } 
      
</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCe2Ki5JBDAOEfBGsXm8buk4Kw4MbGuPp0&&libraries=places"></script>


<h1>Edit your post</h1>

<div class="row">
  <div class="col-8">
<div id="map" class="map"></div>
    <%= render 'form' %>    
  </div>
</div>

